# Quals Challenge: Phasors to Kill #

**Category:** Communication System
**Relative Difficulty:** 3/5
**Author:** [Cromulence](https://cromulence.com/)

Stunned you figured out that first SDR capture? Time to hack harder to
get this flag.


## Building ##

This repository contains two Docker images: The `generator` and `solver`.
You can build them both with:

```sh
make build
```

The resulting Docker images will be tagged as `phasor2:generator`
and `phasor2:solver`.

You can also build just one of them with `make generator` or `make solver`
respectively.

Building the `generator` container requires having already built the
`generator-base` container (see the `generator-base` folder).


## Deploying ##

This challenge has nothing to deploy. It's self-contained within the files
generated by the `generator`. See the top-level `README.md` for more
information on using the `generator` container.


## Testing ##

See top-level `README.md` file for more information on using the `solver`
container.


## Notes ##

A harder RF comms challenge that requires the demodulation of a baseband
signal that is the flag modulated using QPSK. Since its QPSK, there are 4
symbols being encoded, two bits per symbol. Part of the trick is figuring
out the symbol to bits mapping, which will have to be trial and error.
The signal is also differentially encoded, which will have to be reversed
before decoding back to the original bits. Finally, the stream of bits
will have to be synchronized on to byte align it. From there, easily
find the flag in the byte stream.

**Building**

A gnuradio flowgraph is used to perform the modulation of the flag data.
The flowgraph is a python script and is partially generated from
gnuradio-companion. The output from gnuradio-companion is modified to
create the input file with the flag data that is used as a source in the
flowgraph. The output of the flowgraph is sample data in a wav file,
which gives the teams some knowledge of the sample rate and sample
format (floats). 

**Solving**

Another gnuradio flowgraph is used to demonstrate that the challenge can
be solved. Since this is a baseband signal, the flowgraph is pretty
straightforward and should be findable in gnuradio tutorials. A python
script can be used to automate the various symbol-bits mapping permutations.

**Hints**

1. Look at the data in a waveform viewer and see what seems to be happening
   to the waveforms that might give away the kind of modulation. (There are
   two channels so I and Q data, and phase shifts can be seen hinting towards
   a > 2 symbol form of PSK.)
2. A waveform viewer that zooms in enough to show individual samples vs a
   smoothed line can be used to determine the samples per symbol.
3. `gnuradio` might have the tools needed for the job, plus some tutorials...
4. The modulated data is just the flag so you should know a bit stream to
   look for when trying to synchronize (the word "flag").
